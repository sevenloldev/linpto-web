---
const navigationItems = [
  {
    items: [
      { href: "/", text: "首頁" },
      { href: "/philosophy", text: "服務理念" },
      { href: "/lawyers", text: "律師介紹" },
      { href: "/practice-areas", text: "專業領域" },
      { href: "/process", text: "服務流程" },
      { href: "/cases", text: "實務案例" },
      { href: "/contact", text: "聯絡我們" },
    ],
  },
];
const { class: className = "", ...rest } = Astro.props;
---

<div class={className} {...rest}>
  <div class="space-y-8" id="menuContent">
    {
      navigationItems.map((section, sectionIndex) => (
        <div class="flex flex-col gap-1">
          {section.items.map((item, itemIndex) => (
            <a
              href={item.href}
              class="nav-link text-sm text-base-500 hover:text-accent-500 dark:hover:text-accent-300 dark:text-base-50 duration-500"
              data-index={sectionIndex * 100 + itemIndex}
            >
              {item.text}
            </a>
          ))}
        </div>
      ))
    }
  </div>
</div>
<script type="module">
  document.addEventListener("DOMContentLoaded", (event) => {
    const menuContent = document.getElementById("menuContent");
    function animateLinks() {
      const navLinks = menuContent.querySelectorAll(".nav-link");
      navLinks.forEach((link, index) => {
        link.style.opacity = "0";
        link.style.transform = "translateY(20px)";
        link.style.transition = "none";
        setTimeout(() => {
          link.style.transition = `opacity 0.3s ease-out ${index * 0.1}s, transform 0.3s ease-out ${index * 0.1}s`;
          link.style.opacity = "1";
          link.style.transform = "translateY(0)";
        }, 50);
      });
    }
    animateLinks();
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (
          mutation.type === "attributes" &&
          mutation.attributeName === "class"
        ) {
          if (!menuContent.classList.contains("hidden")) {
            animateLinks();
          }
        }
      });
    });
    observer.observe(menuContent, { attributes: true });
  });
</script>
